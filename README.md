# План проекта: HTTP Middleware
## 1. Цель проекта

Создать HTTP-сервис на Go с кастомными middleware, которые:

Логируют запросы и ответы.

Проверяют аутентификацию по токену.

Ограничивают скорость запросов (rate limiting).

Обрабатывают ошибки в едином формате JSON.

## Тесты
```
go test ./... -v
```

# План по добавлению к проекту функционала
Добавить Prometheus метрики (middleware для метрик).

Распределённый rate-limit через Redis или внешнее решение.

Structured logging (zerolog / zap).

Tracing (OpenTelemetry).

Graceful shutdown (context + server.Shutdown).

ASCII-схема, которая показывает поток данных  

                   ┌───────────────────────┐
                   │       Client          │
                   │   (браузер/curl)      │
                   └───────────┬───────────┘
                               │ HTTP-запрос
                               ▼
                   ┌───────────────────────┐
                   │  RecoveryMiddleware    │
                   │ (ловит панику, 500)    │
                   └───────────┬───────────┘
                               │
                               ▼
                   ┌───────────────────────┐
                   │  LoggingMiddleware     │
                   │ (логирует метод, путь, │
                   │ статус, время)         │
                   └───────────┬───────────┘
                               │
                               ▼
                   ┌───────────────────────┐
                   │   AuthMiddleware       │
                   │ (проверяет токен в     │
                   │ Authorization header)  │
                   └───────────┬───────────┘
                               │
                               ▼
                   ┌───────────────────────┐
                   │ RateLimitMiddleware    │
                   │ (ограничение частоты   │
                   │ запросов на IP)        │
                   └───────────┬───────────┘
                               │
                               ▼
                   ┌───────────────────────┐
                   │      Handlers          │
                   │   /ping   /secure      │
                   └───────────┬───────────┘
                               │
                               ▼
                   ┌───────────────────────┐
                   │     Response JSON      │
                   │ {"message": "..."}     │
                   └───────────────────────┘


👉 У маршрута /ping цепочка короче — там нет Auth и RateLimit, только Recovery + Logging.
👉 У /secure подключены все middleware: Recovery → Logging → Auth → RateLimit → Handler.